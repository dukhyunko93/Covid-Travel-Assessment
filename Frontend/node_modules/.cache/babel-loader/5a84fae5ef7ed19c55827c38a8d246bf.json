{"ast":null,"code":"var _jsxFileName = \"/Users/dukhyunko/Development/Covid-Travel/Covid-Travel-Risk-Assessment-Tool-frontend/src/components/Tripinfo.js\";\nimport CovidAssessment from './CovidAssessment';\nimport CovidGuidelines from './CovidGuidelines';\nimport CovidTable from './CovidTable';\nimport React from \"react\";\nimport { Drawer, ANCHOR } from 'baseui/drawer';\nimport { KIND } from 'baseui/notification';\nconst YESTERDAY = 13;\nexport const LEVELS = {\n  SEVERE: 'Level 1: Severe Uncontrolled Community Transmission',\n  SIGNIFICANT: 'Level 2: Significant Uncontrolled Community Transmission',\n  MODERATE: 'Level 3: Moderate, Controlled Transmission',\n  MINIMAL: 'Level 4: Minimal, Controlled Transmission'\n};\nexport const RISK_LEVELS = {\n  [LEVELS.SEVERE]: {\n    color: KIND.negative,\n    dailyLife: ['1. Stay home, except for essential activities', '2. Avoid and cancel all gatherings of any size.', '3. All vulnerable individuals (65+ or with pre-existing health conditions) stay home when possible.', '4. Self-quarantine responsibly for 14 days if in close and prolonged contact with someone who has COVID-19.', '5. Wear face coverings to protect others.', '6. Essential workers practice special precautions to prevent spread.', '7. Avoid non-essential business and personal travel. Follow state guidance for quarantine after visiting certain locations.', '8. Avoid public transportation where possible.'],\n    groupLife: ['1. Cancel visits to nursing homes, long term care facilities, and hospitals.', '2. Avoid and cancel all indoor and outdoor gatherings, including concerts, rodeos, large sporting events, etc. Schools and afterschool activities for youth close, as directed by educational authorities']\n  },\n  [LEVELS.SIGNIFICANT]: {\n    color: KIND.warning,\n    dailyLife: ['1. Stay home when possible.', '2. Avoid and cancel medium (10-250 people) and large public and private gatherings (250+ people).', '3. All vulnerable individuals (65+ or with preexisting health conditions) stay home when possible.', '4. Self-quarantine responsibly for 14 days if in close and prolonged contact withsomeone who has COVID-19.', '5. Wear face coverings to protect others.', '6. Essential workers practice special precautions to prevent spread.', '7. Avoid non-essential business and personal travel. Follow state guidance for quarantine after visiting certain locations.', '8. Use public transportation with caution. Practice good hygiene and social distancing.'],\n    groupLife: ['1. Cancel visits to nursing homes, long term care facilities, and hospitals.', '2. Avoid and cancel medium and large gatherings indoor and outdoor, including concerts, large sporting events, etc.', '3. Phase in some activities for schools following public health guidance. Continue to practice good hygiene and social distancing.']\n  },\n  [LEVELS.MODERATE]: {\n    color: KIND.info,\n    dailyLife: ['1. Stay home when possible.', '2. Minimize attendance at medium (10-250 people) and large public and private gatherings (250+ people).', '3. All vulnerable individuals (65+ or with preexisting health conditions) stay home when possible.', '4. Self-quarantine responsibly for 14 days and monitor symptoms if in close and prolonged contact with someone who has COVID-19.', '5. Wear face coverings to protect others.', '6. Essential workers follow standard precautions.', '7. Limit visits to non-essential business and personal travel. Follow state guidance for quarantine after visiting certain locations.', '8. Continue to use public transportation. Practice good hygiene.'],\n    groupLife: ['1. Avoid visits to vulnerable populations in nursing homes, long term care facilities, and hospitals.', '2. Slowly phase in gatherings indoor and outdoor, including concerts, large sporting events, etc. Activities should follow any relevant guidance and capacity requirements.', '3. Phase in additional activities for schools following public health guidance. Continue to practice good hygiene and social distancing.']\n  },\n  [LEVELS.MINIMAL]: {\n    color: KIND.positive,\n    dailyLife: ['1. Feel free to leave the house and resume in-person work schedules.', '2. Resume attending public and private gatherings freely.', '3. Vulnerable individuals (65+ or with preexisting health conditions) leave home as necessary. Good hygiene and social distancing are still recommended.', '4. Self-quarantine responsibly for 14 days if in close and prolonged contact with someone who has COVID-19.', '5. Resume non-essential travel. Avoid other states or countries where widespread transmission may still be occurring.', '6. Resume full public transportation use.'],\n    groupLife: ['1. Resume visiting vulnerable populations while practicing good hygiene and 6 feet of distance.', '2. Resume large indoor and outdoor gatherings, including concerts, large sporting events, etc., and activities should follow any relevant guidance.', '3. Resume school and after school activities as normal.']\n  }\n};\nlet bottomNavView = true;\n\nconst toggleBottomNav = () => {\n  bottomNavView = !bottomNavView;\n\n  if (bottomNavView === true) {\n    document.querySelector(\".ag.eq\").style.display = \"block\";\n  } else {\n    document.querySelector(\".ag.eq\").style.display = \"none\";\n  }\n};\n\nclass Tripinfo extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      population: \"\",\n      covidData: [],\n      isOpen: true,\n      stateInfo: {}\n    };\n\n    this.getCovidData = () => {\n      let config = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n          Authorization: `Bearer ${this.props.token}`\n        }\n      };\n      fetch(`http://localhost:3001/nytdata/${this.props.destinationfips[0].fips}`, config).then(response => response.json()).then(response => {\n        this.setState({\n          covidData: response.data\n        });\n      });\n    };\n\n    this.getPopulation = () => {\n      let fips = this.props.destinationfips[0].fips;\n      let state;\n      let county;\n\n      if (fips.length < 5) {\n        state = \"0\" + fips.slice(0, 1);\n        county = fips.slice(-3);\n      } else {\n        state = fips.slice(0, 2);\n        county = fips.slice(-3);\n      }\n\n      fetch(`https://api.census.gov/data/2019/pep/population?get=COUNTY,DATE_CODE,DATE_DESC,DENSITY,POP,NAME,STATE&DATE_CODE=12&for=county:${county}&in=state:${state}&key=51999fa2f3c7bac02dceb923be5b78f0d135a3d6`).then(resp => resp.json()).then(data => {\n        var _data$;\n\n        this.setState({\n          population: data === null || data === void 0 ? void 0 : (_data$ = data[1]) === null || _data$ === void 0 ? void 0 : _data$[4]\n        });\n      });\n    };\n\n    this.getLinks = () => {\n      var _this$props$destinati;\n\n      const address = (_this$props$destinati = this.props.destination[0]) === null || _this$props$destinati === void 0 ? void 0 : _this$props$destinati.address;\n      let splitAdd = address.split(\", \");\n      let stateName = splitAdd[1].toLowerCase();\n      fetch(`https://api.covidtracking.com/v1/states/${stateName}/info.json`).then(response => response.json()).then(response => this.setState({\n        stateInfo: response\n      }));\n    };\n\n    this.getCasesDeltas = () => this.state.covidData.reduce((total, currentValue, currentIndex) => {\n      var _this$state$covidData, _currentValue$, _prevValue$;\n\n      if (currentIndex === 0 || currentIndex > this.state.covidData.length - 2) return total; // skip if the first day\n\n      const prevValue = (_this$state$covidData = this.state.covidData) === null || _this$state$covidData === void 0 ? void 0 : _this$state$covidData[currentIndex - 1];\n      const delta = ((currentValue === null || currentValue === void 0 ? void 0 : (_currentValue$ = currentValue[0]) === null || _currentValue$ === void 0 ? void 0 : _currentValue$.cases) || 0) - ((prevValue === null || prevValue === void 0 ? void 0 : (_prevValue$ = prevValue[0]) === null || _prevValue$ === void 0 ? void 0 : _prevValue$.cases) || 0);\n      return [...total, delta];\n    }, []);\n\n    this.getDeathsDeltas = () => this.state.covidData.reduce((total, currentValue, currentIndex) => {\n      var _this$state$covidData2, _currentValue$2, _prevValue$2;\n\n      if (currentIndex === 0 || currentIndex > this.state.covidData.length - 2) return total; // skip if the first day\n\n      const prevValue = (_this$state$covidData2 = this.state.covidData) === null || _this$state$covidData2 === void 0 ? void 0 : _this$state$covidData2[currentIndex - 1];\n      const delta = ((currentValue === null || currentValue === void 0 ? void 0 : (_currentValue$2 = currentValue[0]) === null || _currentValue$2 === void 0 ? void 0 : _currentValue$2.deaths) || 0) - ((prevValue === null || prevValue === void 0 ? void 0 : (_prevValue$2 = prevValue[0]) === null || _prevValue$2 === void 0 ? void 0 : _prevValue$2.deaths) || 0);\n      return [...total, delta];\n    }, []);\n\n    this.getLevelInfo = casesDeltas => {\n      const YESTERDAY_DATA = casesDeltas[YESTERDAY];\n      let level = LEVELS.MINIMAL;\n      let color = KIND.positive;\n\n      if (YESTERDAY_DATA > 400) {\n        level = LEVELS.SEVERE;\n        color = KIND.negative;\n      } else if (YESTERDAY_DATA > 201 && YESTERDAY_DATA < 400) {\n        level = LEVELS.SIGNIFICANT;\n        color = KIND.warning;\n      } else if (YESTERDAY_DATA > 101 && YESTERDAY_DATA < 20) {\n        level = LEVELS.MODERATE;\n        color = KIND.info;\n      }\n\n      return {\n        level,\n        color\n      };\n    };\n  }\n\n  componentDidMount() {\n    this.getCovidData();\n    this.getPopulation();\n    this.getLinks();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props !== prevProps) {\n      this.getCovidData();\n      this.getPopulation();\n      this.getLinks();\n    }\n  }\n\n  render() {\n    var _this$state$covidData3, _this$state$covidData4, _this$state$covidData5, _this$state$covidData6, _this$state$covidData7, _this$state$covidData8;\n\n    const cases = this.getCasesDeltas();\n    const deaths = this.getDeathsDeltas();\n    const level = this.getLevelInfo(cases);\n    const delta = ((_this$state$covidData3 = this.state.covidData) === null || _this$state$covidData3 === void 0 ? void 0 : (_this$state$covidData4 = _this$state$covidData3[14]) === null || _this$state$covidData4 === void 0 ? void 0 : (_this$state$covidData5 = _this$state$covidData4[0]) === null || _this$state$covidData5 === void 0 ? void 0 : _this$state$covidData5.cases) - ((_this$state$covidData6 = this.state.covidData) === null || _this$state$covidData6 === void 0 ? void 0 : (_this$state$covidData7 = _this$state$covidData6[1]) === null || _this$state$covidData7 === void 0 ? void 0 : (_this$state$covidData8 = _this$state$covidData7[0]) === null || _this$state$covidData8 === void 0 ? void 0 : _this$state$covidData8.cases);\n    const guideline = RISK_LEVELS === null || RISK_LEVELS === void 0 ? void 0 : RISK_LEVELS[level.level];\n    return /*#__PURE__*/React.createElement(Drawer, {\n      onClose: toggleBottomNav,\n      isOpen: this.state.isOpen,\n      anchor: ANCHOR.bottom,\n      overrides: {\n        Root: {\n          style: ({\n            $theme\n          }) => {\n            return {\n              height: \"20%\"\n            };\n          }\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bottom-nav\",\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"data-table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CovidTable, {\n      population: this.state.population,\n      covidData: this.state.covidData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"assessment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CovidAssessment, {\n      cases: cases[YESTERDAY],\n      death: deaths[YESTERDAY],\n      delta: delta,\n      level: level,\n      stateInfo: this.state.stateInfo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"guidelines\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CovidGuidelines, {\n      guideline: guideline,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 21\n      }\n    }))));\n  }\n\n}\n\nexport default Tripinfo;","map":{"version":3,"sources":["/Users/dukhyunko/Development/Covid-Travel/Covid-Travel-Risk-Assessment-Tool-frontend/src/components/Tripinfo.js"],"names":["CovidAssessment","CovidGuidelines","CovidTable","React","Drawer","ANCHOR","KIND","YESTERDAY","LEVELS","SEVERE","SIGNIFICANT","MODERATE","MINIMAL","RISK_LEVELS","color","negative","dailyLife","groupLife","warning","info","positive","bottomNavView","toggleBottomNav","document","querySelector","style","display","Tripinfo","Component","state","population","covidData","isOpen","stateInfo","getCovidData","config","method","headers","Accept","Authorization","props","token","fetch","destinationfips","fips","then","response","json","setState","data","getPopulation","county","length","slice","resp","getLinks","address","destination","splitAdd","split","stateName","toLowerCase","getCasesDeltas","reduce","total","currentValue","currentIndex","prevValue","delta","cases","getDeathsDeltas","deaths","getLevelInfo","casesDeltas","YESTERDAY_DATA","level","componentDidMount","componentDidUpdate","prevProps","render","guideline","bottom","Root","$theme","height"],"mappings":"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","sourcesContent":["import CovidAssessment from './CovidAssessment'\nimport CovidGuidelines from './CovidGuidelines'\nimport CovidTable from './CovidTable'\nimport React from \"react\";\n\nimport {Drawer, ANCHOR} from 'baseui/drawer';\nimport {KIND} from 'baseui/notification';\n\nconst YESTERDAY = 13;\nexport const LEVELS = {\n    SEVERE: 'Level 1: Severe Uncontrolled Community Transmission',\n    SIGNIFICANT: 'Level 2: Significant Uncontrolled Community Transmission',\n    MODERATE: 'Level 3: Moderate, Controlled Transmission',\n    MINIMAL: 'Level 4: Minimal, Controlled Transmission',\n};\nexport const RISK_LEVELS = {\n    [LEVELS.SEVERE]: {\n        color: KIND.negative,\n        dailyLife: [\n            '1. Stay home, except for essential activities',\n            '2. Avoid and cancel all gatherings of any size.',\n            '3. All vulnerable individuals (65+ or with pre-existing health conditions) stay home when possible.',\n            '4. Self-quarantine responsibly for 14 days if in close and prolonged contact with someone who has COVID-19.',\n            '5. Wear face coverings to protect others.',\n            '6. Essential workers practice special precautions to prevent spread.',\n            '7. Avoid non-essential business and personal travel. Follow state guidance for quarantine after visiting certain locations.',\n            '8. Avoid public transportation where possible.',\n        ],\n        groupLife: [\n            '1. Cancel visits to nursing homes, long term care facilities, and hospitals.',\n            '2. Avoid and cancel all indoor and outdoor gatherings, including concerts, rodeos, large sporting events, etc. Schools and afterschool activities for youth close, as directed by educational authorities',\n        ],\n    },\n    [LEVELS.SIGNIFICANT]: {\n        color: KIND.warning,\n        dailyLife: [\n            '1. Stay home when possible.',\n            '2. Avoid and cancel medium (10-250 people) and large public and private gatherings (250+ people).',\n            '3. All vulnerable individuals (65+ or with preexisting health conditions) stay home when possible.',\n            '4. Self-quarantine responsibly for 14 days if in close and prolonged contact withsomeone who has COVID-19.',\n            '5. Wear face coverings to protect others.',\n            '6. Essential workers practice special precautions to prevent spread.',\n            '7. Avoid non-essential business and personal travel. Follow state guidance for quarantine after visiting certain locations.',\n            '8. Use public transportation with caution. Practice good hygiene and social distancing.'\n        ],\n        groupLife: [\n            '1. Cancel visits to nursing homes, long term care facilities, and hospitals.',\n            '2. Avoid and cancel medium and large gatherings indoor and outdoor, including concerts, large sporting events, etc.',\n            '3. Phase in some activities for schools following public health guidance. Continue to practice good hygiene and social distancing.' \n        ]\n\n    },\n    [LEVELS.MODERATE]: {\n        color: KIND.info,\n        dailyLife: [\n            '1. Stay home when possible.', \n            '2. Minimize attendance at medium (10-250 people) and large public and private gatherings (250+ people).',\n            '3. All vulnerable individuals (65+ or with preexisting health conditions) stay home when possible.',\n            '4. Self-quarantine responsibly for 14 days and monitor symptoms if in close and prolonged contact with someone who has COVID-19.',\n            '5. Wear face coverings to protect others.',\n            '6. Essential workers follow standard precautions.',\n            '7. Limit visits to non-essential business and personal travel. Follow state guidance for quarantine after visiting certain locations.',\n            '8. Continue to use public transportation. Practice good hygiene.',\n        ],\n        groupLife: [\n            '1. Avoid visits to vulnerable populations in nursing homes, long term care facilities, and hospitals.',\n            '2. Slowly phase in gatherings indoor and outdoor, including concerts, large sporting events, etc. Activities should follow any relevant guidance and capacity requirements.',\n            '3. Phase in additional activities for schools following public health guidance. Continue to practice good hygiene and social distancing.', \n        ]\n\n\n    },\n    [LEVELS.MINIMAL]: {\n        color: KIND.positive,\n        dailyLife: [\n            '1. Feel free to leave the house and resume in-person work schedules.',\n            '2. Resume attending public and private gatherings freely.',\n            '3. Vulnerable individuals (65+ or with preexisting health conditions) leave home as necessary. Good hygiene and social distancing are still recommended.',\n            '4. Self-quarantine responsibly for 14 days if in close and prolonged contact with someone who has COVID-19.',\n            '5. Resume non-essential travel. Avoid other states or countries where widespread transmission may still be occurring.',\n            '6. Resume full public transportation use.',\n        ],\n        groupLife: [\n            '1. Resume visiting vulnerable populations while practicing good hygiene and 6 feet of distance.',\n            '2. Resume large indoor and outdoor gatherings, including concerts, large sporting events, etc., and activities should follow any relevant guidance.',\n            '3. Resume school and after school activities as normal.',\n        ]\n\n    },\n\n\n};\n\nlet bottomNavView = true\n\nconst toggleBottomNav = () => {\n        bottomNavView = !bottomNavView\n        if (bottomNavView === true){\n            document.querySelector(\".ag.eq\").style.display = \"block\"\n          } else {\n            document.querySelector(\".ag.eq\").style.display = \"none\"\n          }\n    }\n\nclass Tripinfo extends React.Component {\n\n    state = {\n        population: \"\",\n        covidData: [],\n        isOpen: true,\n        stateInfo: {}\n    }\n\n    componentDidMount() {\n        this.getCovidData()\n        this.getPopulation()\n        this.getLinks()\n    }\n\n    componentDidUpdate(prevProps){\n        if(this.props !== prevProps){\n            this.getCovidData()\n            this.getPopulation()\n            this.getLinks()\n        }\n    }\n\n    getCovidData = () => {\n        let config = {\n            method: 'GET',\n            headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            Authorization: `Bearer ${this.props.token}`\n            }\n        }\n        fetch(`http://localhost:3001/nytdata/${this.props.destinationfips[0].fips}`,config)\n        .then(response => response.json())\n        .then(response => {\n            this.setState({covidData: response.data})\n        })\n    }\n\n\n    getPopulation = () => {\n        let fips = this.props.destinationfips[0].fips\n        let state;\n        let county;\n        if (fips.length < 5){\n            state = \"0\" + fips.slice(0,1)\n            county = fips.slice(-3)\n        } else {\n            state = fips.slice(0,2)\n            county = fips.slice(-3)\n        }\n  \n        fetch(`https://api.census.gov/data/2019/pep/population?get=COUNTY,DATE_CODE,DATE_DESC,DENSITY,POP,NAME,STATE&DATE_CODE=12&for=county:${county}&in=state:${state}&key=51999fa2f3c7bac02dceb923be5b78f0d135a3d6`)\n        .then(resp => resp.json())\n        .then(data => { this.setState({\n            population: data?.[1]?.[4]\n            })\n        })\n    }\n    \n    getLinks = () => {\n        const address = this.props.destination[0]?.address\n        let splitAdd = address.split(\", \")\n        let stateName = splitAdd[1].toLowerCase()\n        fetch(`https://api.covidtracking.com/v1/states/${stateName}/info.json`)\n        .then(response => response.json())\n        .then(response => this.setState({stateInfo: response}))             \n    }\n    \n\n    getCasesDeltas = () => this.state.covidData.reduce((total, currentValue, currentIndex) => {\n        if (currentIndex === 0 || currentIndex > this.state.covidData.length - 2) return total; // skip if the first day\n        const prevValue = this.state.covidData?.[currentIndex-1];\n        const delta = (currentValue?.[0]?.cases || 0) - (prevValue?.[0]?.cases || 0);\n        return [...total, delta];\n    }, []);\n\n    getDeathsDeltas = () => this.state.covidData.reduce((total, currentValue, currentIndex) => {\n        if (currentIndex === 0 || currentIndex > this.state.covidData.length - 2) return total; // skip if the first day\n        const prevValue = this.state.covidData?.[currentIndex-1];\n        const delta = (currentValue?.[0]?.deaths || 0) - (prevValue?.[0]?.deaths || 0);\n        return [...total, delta];\n    }, []);\n  \n    getLevelInfo = (casesDeltas) => {\n        const YESTERDAY_DATA = casesDeltas[YESTERDAY];\n\n        let level = LEVELS.MINIMAL;\n        let color = KIND.positive;\n        if (YESTERDAY_DATA > 400) {\n            level = LEVELS.SEVERE;\n            color = KIND.negative;\n        } else if (YESTERDAY_DATA > 201 && YESTERDAY_DATA < 400) {\n            level = LEVELS.SIGNIFICANT;\n            color = KIND.warning;\n        } else if (YESTERDAY_DATA > 101 && YESTERDAY_DATA < 20) {\n            level = LEVELS.MODERATE;\n            color = KIND.info;\n        }\n        return {level, color};\n    }\n\n    render() {\n        const cases = this.getCasesDeltas();\n        const deaths = this.getDeathsDeltas();\n        const level = this.getLevelInfo(cases);\n        const delta = this.state.covidData?.[14]?.[0]?.cases - this.state.covidData?.[1]?.[0]?.cases;\n        const guideline = RISK_LEVELS?.[level.level];\n\n        return (\n            <Drawer\n                onClose={toggleBottomNav}\n                isOpen={this.state.isOpen}\n                anchor={ANCHOR.bottom}\n                overrides={{\n                    Root: {\n                        style: ({ $theme }) => {\n                            return { height: \"20%\" };\n                        }\n                    }\n                }}\n            >\n            <div className=\"bottom-nav\" style={{display: \"flex\"}}>\n                <div className=\"data-table\">\n                    <CovidTable population={this.state.population} covidData={this.state.covidData} />\n                </div>\n                <div className=\"assessment\">\n                    <CovidAssessment cases={cases[YESTERDAY]} death={deaths[YESTERDAY]} delta={delta} level={level} stateInfo={this.state.stateInfo} />\n                </div>\n                <div className=\"guidelines\">\n                    <CovidGuidelines guideline={guideline} />\n                    \n                </div>\n            </div>\n            \n          </Drawer>        \n          \n        )\n    }\n}\n\nexport default Tripinfo;\n"]},"metadata":{},"sourceType":"module"}