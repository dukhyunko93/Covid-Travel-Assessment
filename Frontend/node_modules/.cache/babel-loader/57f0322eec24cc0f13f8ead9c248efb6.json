{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/*\nCopyright (c) 2018-2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\n\n\nimport * as React from 'react'; // Files\n\nimport getBuiId from '../utils/get-bui-id.js';\nimport { STATE_CHANGE_TYPES, KEY_STRINGS } from './constants.js';\nimport { scrollItemIntoView } from './utils.js'; // Types\n\nvar MenuStatefulContainer = /*#__PURE__*/function (_React$Component) {\n  _inherits(MenuStatefulContainer, _React$Component);\n\n  function MenuStatefulContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MenuStatefulContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MenuStatefulContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", _objectSpread({}, _this.constructor.defaultProps.initialState, {}, _this.props.initialState));\n\n    _defineProperty(_assertThisInitialized(_this), \"rootRef\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"keyboardControlNode\", _this.props.keyboardControlNode.current);\n\n    _defineProperty(_assertThisInitialized(_this), \"refList\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"optionIds\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"typeAheadChars\", '');\n\n    _defineProperty(_assertThisInitialized(_this), \"typeAheadTimeOut\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (event) {\n      switch (event.key) {\n        case KEY_STRINGS.ArrowUp:\n        case KEY_STRINGS.ArrowDown:\n        case KEY_STRINGS.ArrowLeft:\n        case KEY_STRINGS.ArrowRight:\n        case KEY_STRINGS.Home:\n        case KEY_STRINGS.End:\n          _this.handleArrowKey(event);\n\n          break;\n\n        case KEY_STRINGS.Enter:\n          if (event.keyCode === 229) {\n            // ref.\n            // https://github.com/JedWatson/react-select/blob/e12b42b0e7598ec4a96a1a6480e0b2b4c7dc03e3/packages/react-select/src/Select.js#L1209\n            break;\n          }\n\n          _this.handleEnterKey(event);\n\n          break;\n\n        default:\n          if (_this.props.typeAhead) {\n            clearTimeout(_this.typeAheadTimeOut);\n\n            _this.handleAlphaDown(event);\n          }\n\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAlphaDown\", function (event) {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n      var prevIndex = _this.state.highlightedIndex;\n      _this.typeAheadChars += event.key;\n      _this.typeAheadTimeOut = setTimeout(function () {\n        _this.typeAheadChars = '';\n      }, 500);\n      var nextIndex = prevIndex;\n      event.preventDefault();\n\n      var list = _this.getItems();\n\n      if (list.length === 0 || !('label' in list[0])) return;\n      var notMatch = true;\n\n      for (var n = 0; n < list.length; n++) {\n        var label = list[n].label;\n\n        if (label && label.toUpperCase().indexOf(_this.typeAheadChars.toUpperCase()) === 0) {\n          nextIndex = n;\n          notMatch = false;\n          break;\n        }\n      }\n\n      if (notMatch) {\n        for (var _n = 0; _n < list.length; _n++) {\n          var _label = list[_n].label;\n\n          if (_label && _label.toUpperCase().indexOf(_this.typeAheadChars.toUpperCase()) > 0) {\n            nextIndex = _n;\n            break;\n          }\n        }\n      }\n\n      _this.internalSetState(STATE_CHANGE_TYPES.character, {\n        highlightedIndex: nextIndex\n      });\n\n      if (_this.refList[nextIndex]) {\n        scrollItemIntoView(_this.refList[nextIndex].current, // $FlowFixMe\n        rootRef.current, nextIndex === 0, nextIndex === list.length - 1);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleArrowKey\", function (event) {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n      var prevIndex = _this.state.highlightedIndex;\n      var nextIndex = prevIndex;\n\n      if (event.key === KEY_STRINGS.ArrowUp) {\n        event.preventDefault();\n        nextIndex = Math.max(0, prevIndex - 1);\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveUp, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.ArrowDown) {\n        event.preventDefault();\n        nextIndex = Math.min(prevIndex + 1, _this.getItems().length - 1);\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveDown, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.Home) {\n        event.preventDefault();\n        nextIndex = 0;\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveUp, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.End) {\n        event.preventDefault();\n        nextIndex = _this.getItems().length - 1;\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveDown, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.ArrowLeft) {\n        if (_this.props.getParentMenu) {\n          var parent = _this.props.getParentMenu(rootRef);\n\n          if (parent && parent.current) {\n            parent.current.focus();\n          }\n        }\n      } else if (event.key === KEY_STRINGS.ArrowRight) {\n        if (_this.props.getChildMenu) {\n          var child = _this.props.getChildMenu(rootRef);\n\n          if (child && child.current) {\n            child.current.focus();\n          }\n        }\n      }\n\n      if (_this.refList[nextIndex]) {\n        scrollItemIntoView(_this.refList[nextIndex].current, // $FlowFixMe\n        rootRef.current, nextIndex === 0, nextIndex === _this.getItems().length - 1);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleEnterKey\", function (event) {\n      var onItemSelect = _this.props.onItemSelect;\n      var highlightedIndex = _this.state.highlightedIndex;\n\n      var items = _this.getItems();\n\n      if (items[highlightedIndex] && onItemSelect && !items[highlightedIndex].disabled) {\n        event.preventDefault();\n        onItemSelect({\n          item: items[highlightedIndex],\n          event: event\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleItemClick\", function (index, item, event) {\n      if (_this.props.onItemSelect && !item.disabled) {\n        _this.props.onItemSelect({\n          item: item,\n          event: event\n        });\n\n        _this.internalSetState(STATE_CHANGE_TYPES.click, {\n          highlightedIndex: index,\n          activedescendantId: _this.optionIds[index]\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseEnter\", function (index) {\n      _this.internalSetState(STATE_CHANGE_TYPES.mouseEnter, {\n        highlightedIndex: index,\n        activedescendantId: _this.optionIds[index]\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseLeave\", function () {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n\n      if (!_this.props.getChildMenu || !_this.props.getChildMenu(rootRef)) {\n        _this.internalSetState(STATE_CHANGE_TYPES.mouseLeave, {\n          highlightedIndex: -1\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRequiredItemProps\", function (item, index) {\n      var itemRef = _this.refList[index];\n\n      if (!itemRef) {\n        itemRef = React.createRef();\n        _this.refList[index] = itemRef;\n        _this.optionIds[index] = getBuiId();\n      }\n\n      var _this$props$getRequir = _this.props.getRequiredItemProps(item, index),\n          disabledVal = _this$props$getRequir.disabled,\n          requiredItemProps = _objectWithoutProperties(_this$props$getRequir, [\"disabled\"]);\n\n      var disabled = typeof disabledVal === 'boolean' ? disabledVal : !!item.disabled;\n      return _objectSpread({\n        id: requiredItemProps.id || _this.optionIds[index],\n        disabled: disabled,\n        ref: itemRef,\n        isFocused: _this.state.isFocused,\n        isHighlighted: _this.state.highlightedIndex === index,\n        resetMenu: _this.resetMenu\n      }, disabled ? {} : {\n        onClick: _this.handleItemClick.bind(_assertThisInitialized(_this), index, item),\n        onMouseEnter: _this.handleMouseEnter.bind(_assertThisInitialized(_this), index)\n      }, {}, requiredItemProps);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"focusMenu\", function (event) {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n\n      if (_this.state.isFocused) {\n        return;\n      } // $FlowFixMe\n\n\n      if (rootRef.current && rootRef.current.contains(event.target)) {\n        if (_this.state.highlightedIndex < 0) {\n          _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n            isFocused: true,\n            highlightedIndex: 0\n          });\n        } else {\n          _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n            isFocused: true\n          });\n        }\n\n        rootRef.current.focus();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unfocusMenu\", function () {\n      _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n        isFocused: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetMenu\", function () {\n      _this.internalSetState(STATE_CHANGE_TYPES.reset, {\n        isFocused: false,\n        highlightedIndex: -1,\n        activedescendantId: null\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(MenuStatefulContainer, [{\n    key: \"getItems\",\n    value: function getItems() {\n      var _this2 = this;\n\n      if (Array.isArray(this.props.items)) {\n        return this.props.items;\n      }\n\n      var optgroups = Object.keys(this.props.items);\n      return optgroups.reduce(function (output, optgroup) {\n        // $FlowFixMe already checked above that items is grouped shape\n        return output.concat(_this2.props.items[optgroup]);\n      }, []);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var rootRef = this.props.rootRef ? this.props.rootRef : this.rootRef;\n\n      if (typeof document !== 'undefined') {\n        if (rootRef.current\n        /** This condition added to satisfy Flow */\n        && this.state.highlightedIndex > -1 && this.refList[this.state.highlightedIndex]) {\n          scrollItemIntoView(this.refList[this.state.highlightedIndex].current, rootRef.current, this.state.highlightedIndex === 0, this.state.highlightedIndex === this.getItems().length - 1, 'center');\n        }\n\n        if (this.state.isFocused) {\n          if (this.keyboardControlNode) {\n            this.keyboardControlNode.addEventListener('keydown', this.onKeyDown);\n          }\n        }\n      }\n\n      this.props.addMenuToNesting && this.props.addMenuToNesting(rootRef);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var rootRef = this.props.rootRef ? this.props.rootRef : this.rootRef;\n\n      if (typeof document !== 'undefined') {\n        if (this.keyboardControlNode) this.keyboardControlNode.removeEventListener('keydown', this.onKeyDown);\n      }\n\n      this.props.removeMenuFromNesting && this.props.removeMenuFromNesting(rootRef);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_, prevState) {\n      if (typeof document !== 'undefined') {\n        if (!prevState.isFocused && this.state.isFocused) {\n          if (this.keyboardControlNode) this.keyboardControlNode.addEventListener('keydown', this.onKeyDown);\n        } else if (prevState.isFocused && !this.state.isFocused) {\n          if (this.keyboardControlNode) this.keyboardControlNode.removeEventListener('keydown', this.onKeyDown);\n        }\n      }\n\n      var range = this.getItems().length;\n\n      if (range === 0 && this.state.highlightedIndex !== -1) {\n        this.internalSetState(STATE_CHANGE_TYPES.enter, {\n          highlightedIndex: -1\n        });\n      } else if (this.state.highlightedIndex >= range) {\n        this.internalSetState(STATE_CHANGE_TYPES.enter, {\n          highlightedIndex: 0\n        });\n      }\n    } // One array to hold all of list item refs\n\n  }, {\n    key: \"internalSetState\",\n    // Internal set state function that will also invoke stateReducer\n    value: function internalSetState(changeType, changes) {\n      var stateReducer = this.props.stateReducer;\n\n      if (this.props.onActiveDescendantChange && typeof changes.highlightedIndex === 'number' && this.state.highlightedIndex !== changes.highlightedIndex) {\n        this.props.onActiveDescendantChange(this.optionIds[changes.highlightedIndex]);\n      }\n\n      this.setState(stateReducer(changeType, changes, this.state));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // omit the stateful-container's props and don't pass it down\n      // to the children (stateless menu)\n      var _this$props = this.props,\n          initialState = _this$props.initialState,\n          stateReducer = _this$props.stateReducer,\n          children = _this$props.children,\n          onItemSelect = _this$props.onItemSelect,\n          addMenuToNesting = _this$props.addMenuToNesting,\n          removeMenuFromNesting = _this$props.removeMenuFromNesting,\n          getParentMenu = _this$props.getParentMenu,\n          getChildMenu = _this$props.getChildMenu,\n          restProps = _objectWithoutProperties(_this$props, [\"initialState\", \"stateReducer\", \"children\", \"onItemSelect\", \"addMenuToNesting\", \"removeMenuFromNesting\", \"getParentMenu\", \"getChildMenu\"]);\n\n      return this.props.children(_objectSpread({}, restProps, {\n        rootRef: this.props.rootRef ? this.props.rootRef : this.rootRef,\n        activedescendantId: this.optionIds[this.state.highlightedIndex],\n        getRequiredItemProps: this.getRequiredItemProps,\n        handleMouseLeave: this.handleMouseLeave,\n        highlightedIndex: this.state.highlightedIndex,\n        isFocused: this.state.isFocused,\n        handleKeyDown: this.props.keyboardControlNode.current ? function (event) {} : this.onKeyDown,\n        focusMenu: this.focusMenu,\n        unfocusMenu: this.unfocusMenu\n      }));\n    }\n  }]);\n\n  return MenuStatefulContainer;\n}(React.Component);\n\n_defineProperty(MenuStatefulContainer, \"defaultProps\", {\n  // keeping it in defaultProps to satisfy Flow\n  initialState: {\n    // We start the index at -1 to indicate that no highlighting exists initially\n    highlightedIndex: -1,\n    isFocused: false\n  },\n  typeAhead: true,\n  keyboardControlNode: {\n    current: null\n  },\n  stateReducer: function (changeType, changes) {\n    return changes;\n  },\n  onItemSelect: function onItemSelect() {},\n  getRequiredItemProps: function getRequiredItemProps() {\n    return {};\n  },\n  children: function children() {\n    return null;\n  },\n  // from nested-menus context\n  addMenuToNesting: function addMenuToNesting() {},\n  removeMenuFromNesting: function removeMenuFromNesting() {},\n  getParentMenu: function getParentMenu() {},\n  getChildMenu: function getChildMenu() {}\n});\n\nexport { MenuStatefulContainer as default };","map":{"version":3,"sources":["/Users/dukhyunko/Development/Covid-Travel/Covid-Travel-Risk-Assessment-Tool-frontend/node_modules/baseui/esm/menu/stateful-container.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","propertyIsEnumerable","call","sourceKeys","keys","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","React","getBuiId","STATE_CHANGE_TYPES","KEY_STRINGS","scrollItemIntoView","MenuStatefulContainer","_React$Component","_getPrototypeOf2","_this","_len","args","Array","_key","concat","defaultProps","initialState","createRef","keyboardControlNode","current","event","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","handleArrowKey","Enter","keyCode","handleEnterKey","typeAhead","clearTimeout","typeAheadTimeOut","handleAlphaDown","rootRef","prevIndex","state","highlightedIndex","typeAheadChars","setTimeout","nextIndex","preventDefault","list","getItems","notMatch","n","label","toUpperCase","_n","_label","internalSetState","character","refList","Math","max","moveUp","min","moveDown","getParentMenu","parent","focus","getChildMenu","child","onItemSelect","items","disabled","item","index","click","activedescendantId","optionIds","mouseEnter","mouseLeave","itemRef","_this$props$getRequir","getRequiredItemProps","disabledVal","requiredItemProps","id","ref","isFocused","isHighlighted","resetMenu","onClick","handleItemClick","bind","onMouseEnter","handleMouseEnter","contains","reset","_this2","isArray","optgroups","reduce","output","optgroup","componentDidMount","document","addEventListener","onKeyDown","addMenuToNesting","componentWillUnmount","removeEventListener","removeMenuFromNesting","componentDidUpdate","_","prevState","range","enter","changeType","changes","stateReducer","onActiveDescendantChange","setState","render","_this$props","children","restProps","handleMouseLeave","handleKeyDown","focusMenu","unfocusMenu","Component","default"],"mappings":"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","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\nCopyright (c) 2018-2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport * as React from 'react'; // Files\n\nimport getBuiId from '../utils/get-bui-id.js';\nimport { STATE_CHANGE_TYPES, KEY_STRINGS } from './constants.js';\nimport { scrollItemIntoView } from './utils.js'; // Types\n\nvar MenuStatefulContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MenuStatefulContainer, _React$Component);\n\n  function MenuStatefulContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MenuStatefulContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MenuStatefulContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", _objectSpread({}, _this.constructor.defaultProps.initialState, {}, _this.props.initialState));\n\n    _defineProperty(_assertThisInitialized(_this), \"rootRef\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"keyboardControlNode\", _this.props.keyboardControlNode.current);\n\n    _defineProperty(_assertThisInitialized(_this), \"refList\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"optionIds\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"typeAheadChars\", '');\n\n    _defineProperty(_assertThisInitialized(_this), \"typeAheadTimeOut\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (event) {\n      switch (event.key) {\n        case KEY_STRINGS.ArrowUp:\n        case KEY_STRINGS.ArrowDown:\n        case KEY_STRINGS.ArrowLeft:\n        case KEY_STRINGS.ArrowRight:\n        case KEY_STRINGS.Home:\n        case KEY_STRINGS.End:\n          _this.handleArrowKey(event);\n\n          break;\n\n        case KEY_STRINGS.Enter:\n          if (event.keyCode === 229) {\n            // ref.\n            // https://github.com/JedWatson/react-select/blob/e12b42b0e7598ec4a96a1a6480e0b2b4c7dc03e3/packages/react-select/src/Select.js#L1209\n            break;\n          }\n\n          _this.handleEnterKey(event);\n\n          break;\n\n        default:\n          if (_this.props.typeAhead) {\n            clearTimeout(_this.typeAheadTimeOut);\n\n            _this.handleAlphaDown(event);\n          }\n\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAlphaDown\", function (event) {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n      var prevIndex = _this.state.highlightedIndex;\n      _this.typeAheadChars += event.key;\n      _this.typeAheadTimeOut = setTimeout(function () {\n        _this.typeAheadChars = '';\n      }, 500);\n      var nextIndex = prevIndex;\n      event.preventDefault();\n\n      var list = _this.getItems();\n\n      if (list.length === 0 || !('label' in list[0])) return;\n      var notMatch = true;\n\n      for (var n = 0; n < list.length; n++) {\n        var label = list[n].label;\n\n        if (label && label.toUpperCase().indexOf(_this.typeAheadChars.toUpperCase()) === 0) {\n          nextIndex = n;\n          notMatch = false;\n          break;\n        }\n      }\n\n      if (notMatch) {\n        for (var _n = 0; _n < list.length; _n++) {\n          var _label = list[_n].label;\n\n          if (_label && _label.toUpperCase().indexOf(_this.typeAheadChars.toUpperCase()) > 0) {\n            nextIndex = _n;\n            break;\n          }\n        }\n      }\n\n      _this.internalSetState(STATE_CHANGE_TYPES.character, {\n        highlightedIndex: nextIndex\n      });\n\n      if (_this.refList[nextIndex]) {\n        scrollItemIntoView(_this.refList[nextIndex].current, // $FlowFixMe\n        rootRef.current, nextIndex === 0, nextIndex === list.length - 1);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleArrowKey\", function (event) {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n      var prevIndex = _this.state.highlightedIndex;\n      var nextIndex = prevIndex;\n\n      if (event.key === KEY_STRINGS.ArrowUp) {\n        event.preventDefault();\n        nextIndex = Math.max(0, prevIndex - 1);\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveUp, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.ArrowDown) {\n        event.preventDefault();\n        nextIndex = Math.min(prevIndex + 1, _this.getItems().length - 1);\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveDown, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.Home) {\n        event.preventDefault();\n        nextIndex = 0;\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveUp, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.End) {\n        event.preventDefault();\n        nextIndex = _this.getItems().length - 1;\n\n        _this.internalSetState(STATE_CHANGE_TYPES.moveDown, {\n          highlightedIndex: nextIndex\n        });\n      } else if (event.key === KEY_STRINGS.ArrowLeft) {\n        if (_this.props.getParentMenu) {\n          var parent = _this.props.getParentMenu(rootRef);\n\n          if (parent && parent.current) {\n            parent.current.focus();\n          }\n        }\n      } else if (event.key === KEY_STRINGS.ArrowRight) {\n        if (_this.props.getChildMenu) {\n          var child = _this.props.getChildMenu(rootRef);\n\n          if (child && child.current) {\n            child.current.focus();\n          }\n        }\n      }\n\n      if (_this.refList[nextIndex]) {\n        scrollItemIntoView(_this.refList[nextIndex].current, // $FlowFixMe\n        rootRef.current, nextIndex === 0, nextIndex === _this.getItems().length - 1);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleEnterKey\", function (event) {\n      var onItemSelect = _this.props.onItemSelect;\n      var highlightedIndex = _this.state.highlightedIndex;\n\n      var items = _this.getItems();\n\n      if (items[highlightedIndex] && onItemSelect && !items[highlightedIndex].disabled) {\n        event.preventDefault();\n        onItemSelect({\n          item: items[highlightedIndex],\n          event: event\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleItemClick\", function (index, item, event) {\n      if (_this.props.onItemSelect && !item.disabled) {\n        _this.props.onItemSelect({\n          item: item,\n          event: event\n        });\n\n        _this.internalSetState(STATE_CHANGE_TYPES.click, {\n          highlightedIndex: index,\n          activedescendantId: _this.optionIds[index]\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseEnter\", function (index) {\n      _this.internalSetState(STATE_CHANGE_TYPES.mouseEnter, {\n        highlightedIndex: index,\n        activedescendantId: _this.optionIds[index]\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseLeave\", function () {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n\n      if (!_this.props.getChildMenu || !_this.props.getChildMenu(rootRef)) {\n        _this.internalSetState(STATE_CHANGE_TYPES.mouseLeave, {\n          highlightedIndex: -1\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRequiredItemProps\", function (item, index) {\n      var itemRef = _this.refList[index];\n\n      if (!itemRef) {\n        itemRef = React.createRef();\n        _this.refList[index] = itemRef;\n        _this.optionIds[index] = getBuiId();\n      }\n\n      var _this$props$getRequir = _this.props.getRequiredItemProps(item, index),\n          disabledVal = _this$props$getRequir.disabled,\n          requiredItemProps = _objectWithoutProperties(_this$props$getRequir, [\"disabled\"]);\n\n      var disabled = typeof disabledVal === 'boolean' ? disabledVal : !!item.disabled;\n      return _objectSpread({\n        id: requiredItemProps.id || _this.optionIds[index],\n        disabled: disabled,\n        ref: itemRef,\n        isFocused: _this.state.isFocused,\n        isHighlighted: _this.state.highlightedIndex === index,\n        resetMenu: _this.resetMenu\n      }, disabled ? {} : {\n        onClick: _this.handleItemClick.bind(_assertThisInitialized(_this), index, item),\n        onMouseEnter: _this.handleMouseEnter.bind(_assertThisInitialized(_this), index)\n      }, {}, requiredItemProps);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"focusMenu\", function (event) {\n      var rootRef = _this.props.rootRef ? _this.props.rootRef : _this.rootRef;\n\n      if (_this.state.isFocused) {\n        return;\n      } // $FlowFixMe\n\n\n      if (rootRef.current && rootRef.current.contains(event.target)) {\n        if (_this.state.highlightedIndex < 0) {\n          _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n            isFocused: true,\n            highlightedIndex: 0\n          });\n        } else {\n          _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n            isFocused: true\n          });\n        }\n\n        rootRef.current.focus();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unfocusMenu\", function () {\n      _this.internalSetState(STATE_CHANGE_TYPES.focus, {\n        isFocused: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetMenu\", function () {\n      _this.internalSetState(STATE_CHANGE_TYPES.reset, {\n        isFocused: false,\n        highlightedIndex: -1,\n        activedescendantId: null\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(MenuStatefulContainer, [{\n    key: \"getItems\",\n    value: function getItems() {\n      var _this2 = this;\n\n      if (Array.isArray(this.props.items)) {\n        return this.props.items;\n      }\n\n      var optgroups = Object.keys(this.props.items);\n      return optgroups.reduce(function (output, optgroup) {\n        // $FlowFixMe already checked above that items is grouped shape\n        return output.concat(_this2.props.items[optgroup]);\n      }, []);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var rootRef = this.props.rootRef ? this.props.rootRef : this.rootRef;\n\n      if (typeof document !== 'undefined') {\n        if (rootRef.current\n        /** This condition added to satisfy Flow */\n        && this.state.highlightedIndex > -1 && this.refList[this.state.highlightedIndex]) {\n          scrollItemIntoView(this.refList[this.state.highlightedIndex].current, rootRef.current, this.state.highlightedIndex === 0, this.state.highlightedIndex === this.getItems().length - 1, 'center');\n        }\n\n        if (this.state.isFocused) {\n          if (this.keyboardControlNode) {\n            this.keyboardControlNode.addEventListener('keydown', this.onKeyDown);\n          }\n        }\n      }\n\n      this.props.addMenuToNesting && this.props.addMenuToNesting(rootRef);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var rootRef = this.props.rootRef ? this.props.rootRef : this.rootRef;\n\n      if (typeof document !== 'undefined') {\n        if (this.keyboardControlNode) this.keyboardControlNode.removeEventListener('keydown', this.onKeyDown);\n      }\n\n      this.props.removeMenuFromNesting && this.props.removeMenuFromNesting(rootRef);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_, prevState) {\n      if (typeof document !== 'undefined') {\n        if (!prevState.isFocused && this.state.isFocused) {\n          if (this.keyboardControlNode) this.keyboardControlNode.addEventListener('keydown', this.onKeyDown);\n        } else if (prevState.isFocused && !this.state.isFocused) {\n          if (this.keyboardControlNode) this.keyboardControlNode.removeEventListener('keydown', this.onKeyDown);\n        }\n      }\n\n      var range = this.getItems().length;\n\n      if (range === 0 && this.state.highlightedIndex !== -1) {\n        this.internalSetState(STATE_CHANGE_TYPES.enter, {\n          highlightedIndex: -1\n        });\n      } else if (this.state.highlightedIndex >= range) {\n        this.internalSetState(STATE_CHANGE_TYPES.enter, {\n          highlightedIndex: 0\n        });\n      }\n    } // One array to hold all of list item refs\n\n  }, {\n    key: \"internalSetState\",\n    // Internal set state function that will also invoke stateReducer\n    value: function internalSetState(changeType, changes) {\n      var stateReducer = this.props.stateReducer;\n\n      if (this.props.onActiveDescendantChange && typeof changes.highlightedIndex === 'number' && this.state.highlightedIndex !== changes.highlightedIndex) {\n        this.props.onActiveDescendantChange(this.optionIds[changes.highlightedIndex]);\n      }\n\n      this.setState(stateReducer(changeType, changes, this.state));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // omit the stateful-container's props and don't pass it down\n      // to the children (stateless menu)\n      var _this$props = this.props,\n          initialState = _this$props.initialState,\n          stateReducer = _this$props.stateReducer,\n          children = _this$props.children,\n          onItemSelect = _this$props.onItemSelect,\n          addMenuToNesting = _this$props.addMenuToNesting,\n          removeMenuFromNesting = _this$props.removeMenuFromNesting,\n          getParentMenu = _this$props.getParentMenu,\n          getChildMenu = _this$props.getChildMenu,\n          restProps = _objectWithoutProperties(_this$props, [\"initialState\", \"stateReducer\", \"children\", \"onItemSelect\", \"addMenuToNesting\", \"removeMenuFromNesting\", \"getParentMenu\", \"getChildMenu\"]);\n\n      return this.props.children(_objectSpread({}, restProps, {\n        rootRef: this.props.rootRef ? this.props.rootRef : this.rootRef,\n        activedescendantId: this.optionIds[this.state.highlightedIndex],\n        getRequiredItemProps: this.getRequiredItemProps,\n        handleMouseLeave: this.handleMouseLeave,\n        highlightedIndex: this.state.highlightedIndex,\n        isFocused: this.state.isFocused,\n        handleKeyDown: this.props.keyboardControlNode.current ? function (event) {} : this.onKeyDown,\n        focusMenu: this.focusMenu,\n        unfocusMenu: this.unfocusMenu\n      }));\n    }\n  }]);\n\n  return MenuStatefulContainer;\n}(React.Component);\n\n_defineProperty(MenuStatefulContainer, \"defaultProps\", {\n  // keeping it in defaultProps to satisfy Flow\n  initialState: {\n    // We start the index at -1 to indicate that no highlighting exists initially\n    highlightedIndex: -1,\n    isFocused: false\n  },\n  typeAhead: true,\n  keyboardControlNode: {\n    current: null\n  },\n  stateReducer: function (changeType, changes) {\n    return changes;\n  },\n  onItemSelect: function onItemSelect() {},\n  getRequiredItemProps: function getRequiredItemProps() {\n    return {};\n  },\n  children: function children() {\n    return null;\n  },\n  // from nested-menus context\n  addMenuToNesting: function addMenuToNesting() {},\n  removeMenuFromNesting: function removeMenuFromNesting() {},\n  getParentMenu: function getParentMenu() {},\n  getChildMenu: function getChildMenu() {}\n});\n\nexport { MenuStatefulContainer as default };"]},"metadata":{},"sourceType":"module"}